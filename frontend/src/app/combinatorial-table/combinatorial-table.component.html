<div class="mat-table-container" title>
  <table td-data-table>
    <th td-data-table-column class="mat-checkbox-column">
      <mat-checkbox
        #checkBoxAll
        [disabled]="!hasData"
        [indeterminate]="isAnySelected() && !isAllSelected()"
        [checked]="isAllSelected() && hasData"
        (keyup.enter)="selectAll(checkBoxAll.checked)"
        (keyup.space)="selectAll(checkBoxAll.checked)"
        (keydown.space)="blockEvent($event)"
        (click)="selectAll(checkBoxAll.checked)">
      </mat-checkbox>
    </th>
    <th td-data-table-column
      *ngFor="let column of columns"
      [name]="column.name">
      <span [matTooltip]="column.tooltip">{{column.label}}</span>
    </th>
    <tr 
      td-data-table-row
      *ngFor='let combinatorial of combinatorialObservable | async'>
      <td td-data-table-cell class="mat-checkbox-cell">
        <mat-pseudo-checkbox
          [state]='isCombinatorialSelected(combinatorial) ? "checked" : "unchecked"'
          (click)='select(combinatorial)'>
        </mat-pseudo-checkbox>
      </td>
      <td td-data-table-cell>
        {{combinatorial.name}}
      </td>
      <td td-data-table-cell>
        <div *ngIf='combinatorial.description; else ElseBlock'>
          <span>
            {{combinatorial.description}}
          </span>
        </div>
        <ng-template #ElseBlock>
          <span class="md-body-1">
            No description
          </span>
        </ng-template>
      </td>
      <td td-data-table-cell>
        <span text-align='left'>
          {{combinatorial.projects.length}}
        </span>
      </td>
      <td td-data-table-cell>
        <span>
          <button mat-button
            [routerLink]="['/combinatorial/'+combinatorial.id]">
            <mat-icon>
              mode_edit
            </mat-icon>
          </button>
          <button mat-button
            (click)='downloadCsv(combinatorial)'>
            <mat-icon>
              file_download
            </mat-icon>
          </button>
        </span>
      </td>
    </tr>
  </table>
</div>